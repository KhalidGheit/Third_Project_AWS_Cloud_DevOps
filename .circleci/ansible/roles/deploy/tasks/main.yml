# - name: "run bash script"
#   become: yes
#   shell: |
#     npm install
#     pm2 stop default
#     pm2 start npm -- start
# extract the zipped artifact artifact.tar.gz into the EC2 instance, andstart the app
- name: "extract the zipped artifact artifact.tar.gz into the EC2 instance, and start the app"
  become: yes
  unarchive:
    src: /home/ubuntu/artifact.tar.gz
    dest: /home/ubuntu/
    remote_src: yes
- name: "start the app"
  become: yes
  shell: |
    npm install
    pm2 stop default
    pm2 start npm -- start